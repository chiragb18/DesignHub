<div class="editor-shell" [class.is-mobile]="bannerService.isMobile()">
    <!-- Full Width Top Navbar -->
    <app-navbar class="top-nav"></app-navbar>

    <div class="main-layout">
        <!-- Left Nav Sidebar -->
        <div class="nav-sidebar" *ngIf="!bannerService.isMobile()">
            <button [class.active]="bannerService.activeTab() === 'templates'"
                (click)="bannerService.activeTab.set('templates')" title="Templates">
                <span class="material-symbols-outlined">grid_view</span>
            </button>
            <button [class.active]="bannerService.activeTab() === 'text'" (click)="bannerService.activeTab.set('text')"
                title="Text">
                <span class="material-symbols-outlined">title</span>
            </button>
            <button [class.active]="bannerService.activeTab() === 'elements'"
                (click)="bannerService.activeTab.set('elements')" title="Elements">
                <span class="material-symbols-outlined">auto_awesome_motion</span>
            </button>
            <button [class.active]="bannerService.activeTab() === 'cutouts'"
                (click)="bannerService.activeTab.set('cutouts')" title="Cutouts">
                <span class="material-symbols-outlined">content_cut</span>
            </button>
            <button [class.active]="bannerService.activeTab() === 'filters'"
                (click)="bannerService.activeTab.set('filters')" title="Filters">
                <span class="material-symbols-outlined">magic_button</span>
            </button>
            <button [class.active]="bannerService.activeTab() === 'background'"
                (click)="bannerService.activeTab.set('background')" title="Background">
                <span class="material-symbols-outlined">palette</span>
            </button>
            <button [class.active]="bannerService.activeTab() === 'layers'"
                (click)="bannerService.activeTab.set('layers')" title="Layers">
                <span class="material-symbols-outlined">layers</span>
            </button>

            <!-- Projects Tab (At the last) -->
            <div class="nav-spacer"></div>
            <button [class.active]="bannerService.activeTab() === 'projects'"
                (click)="bannerService.activeTab.set('projects')" title="Saved Projects">
                <span class="material-symbols-outlined">folder</span>
            </button>
        </div>

        <!-- Center Workspace -->
        <div class="center-content">
            <app-canvas-editor></app-canvas-editor>

            <!-- Template Info Banner -->
            <div class="template-info-banner" *ngIf="bannerService.showTemplateInfo()">
                <span class="material-symbols-outlined icon">info</span>
                All elements in this template are editable
            </div>

            <!-- Template Helper Action -->
            <div class="template-helper-action" *ngIf="bannerService.showTemplateInfo()">
                <button (click)="bannerService.addTextWithStyle()" class="btn-helper">
                    <span class="material-symbols-outlined">add_circle</span>
                    Add text with same style
                </button>
            </div>
        </div>

        <!-- Sidebar Resizer (Desktop Only) -->
        <div class="sidebar-resizer" *ngIf="!bannerService.isMobile()" (mousedown)="startResizing($event)"
            (dblclick)="resetSidebar()">
            <div class="resizer-inner"></div>
        </div>

        <!-- Right Property Sidebar Overlay (Mobile) -->
        <div class="mobile-sidebar-overlay" *ngIf="bannerService.isMobile() && bannerService.activeTab() !== ''"
            (click)="bannerService.activeTab.set('')"></div>

        <!-- Right Property Sidebar -->
        <app-right-sidebar [class.mobile-bottom-sheet]="bannerService.isMobile()"
            [class.show]="bannerService.isMobile() && bannerService.activeTab() !== ''"
            [style.width.px]="bannerService.isMobile() ? null : sidebarWidth">
        </app-right-sidebar>
    </div>

    <!-- Mobile Bottom Navigation -->
    <app-mobile-toolbar *ngIf="bannerService.isMobile()"></app-mobile-toolbar>
</div>
<app-notification-container></app-notification-container>